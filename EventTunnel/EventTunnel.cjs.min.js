"use strict";var e=require("vue"),t=require("@smartmed/webpatient-vue-components/domain"),n=require("@smartmed/webpatient-vue-components/tokens"),u=e.defineComponent({props:{duration:{type:Number,required:!0},eventsCount:{type:Number,required:!0},preventOntouch:Boolean},name:"EventTunnel",setup(u){const{duration:r,preventOntouch:a,eventsCount:v}=e.toRefs(u),l=e.ref([r.value,0]),o=e.ref(0),s=e.ref(null),d=e.ref(null),i=e.ref(null),m=()=>{let e=0;s.value=setInterval((()=>{l.value=[r.value,l.value[1]+1],e=0}),r.value),d.value=setInterval((()=>{e+=1,o.value=t.clamp(e/v.value,0,1)}),r.value/v.value)},c=()=>{s.value&&clearInterval(s.value),d.value&&(clearInterval(d.value),o.value=1)},E=()=>c(),p=()=>{c(),m()};return e.onMounted((()=>{m(),a.value&&i.value&&(i.value.addEventListener("mouseenter",E),i.value.addEventListener("touchstart",E),i.value.addEventListener("touchend",p),i.value.addEventListener("mouseleave",p))})),e.onUnmounted((()=>{c(),a.value&&i.value&&(i.value.removeEventListener("mouseenter",E),i.value.removeEventListener("touchstart",E),i.value.removeEventListener("touchend",p),i.value.removeEventListener("mouseleave",p))})),e.watch(r,(e=>{c(),e&&m()})),e.provide(n.EVENT_TUNNEL_TOKEN,e.readonly(l)),e.provide(n.EVENT_TUNNEL_PROGRESS_TOKEN,e.readonly(o)),{host:i}}});const r={ref:"host"};u.render=function(t,n,u,a,v,l){return e.openBlock(),e.createElementBlock("div",r,[e.renderSlot(t.$slots,"default")],512)},module.exports=u;
