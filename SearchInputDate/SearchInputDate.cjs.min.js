"use strict";var e=require("vue"),a=require("@smartmed/webpatient-vue-components/SearchInput"),t=require("@smartmed/webpatient-vue-components/Datepicker"),l=require("@smartmed/webpatient-vue-components/directives"),n=require("@smartmed/webpatient-vue-components/SvgIcon");function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(a),r=s(t),i=s(n);const d=new Intl.DateTimeFormat("ru",{day:"numeric",month:"short"});var c=e.defineComponent({emits:["update:modelValue","update:date","clear-search"],directives:{"click-outside":l.ClickOutsideDirective},name:"SearchInputDate",props:{disableNextDate:Boolean,modelValue:{type:String,required:!0},size:{type:String,default:"md",validator:e=>["lg","md","sm"].includes(e)},date:{type:[Date,String,Array,Object]},placeholder:String},data:()=>({isShowCalendar:!1}),computed:{formattedDate(){return Array.isArray(this.date)?this.date.map((e=>d.format(e))).join(" â€” "):this.date instanceof Date?d.format(this.date):""},disabledDates(){return this.disableNextDate?e=>new Date<e:()=>!1},iconSize(){return"sm"===this.size?"md":"lg"}},methods:{closeCalendar(){this.isShowCalendar=!1},selectDate(e){this.isShowCalendar=!1,this.$emit("update:date",e)}},components:{SearchInput:o.default,Datepicker:r.default,SvgIcon:i.default}});!function(e,a){void 0===a&&(a={});var t=a.insertAt;if(e&&"undefined"!=typeof document){var l=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===t&&l.firstChild?l.insertBefore(n,l.firstChild):l.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}("._wrapper_1lvgy_1 {\n  position: relative;\n}\n._datePicker_1lvgy_5 {\n  position: absolute;\n  right: 0;\n  top: calc(100% + 16px);\n}\n._calendarIcon_1lvgy_11 {\n  color: var(--smed-base-05);\n  cursor: pointer;\n}\n._calendarIcon_1lvgy_11._active_1lvgy_15, ._calendarIcon_1lvgy_11:hover {\n  color: var(--smed-primary);\n}\n._dateTag_1lvgy_19 {\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 20px;\n  letter-spacing: 0px;\n  background-color: var(--smed-primary);\n  border-radius: 4px;\n  color: var(--smed-base-09);\n  display: flex;\n  align-items: center;\n  overflow: hidden;\n  cursor: pointer;\n}\n._dateTag_1lvgy_19._small_1lvgy_32 {\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 16px;\n  letter-spacing: 0px;\n}\n._dateTag_1lvgy_19._small_1lvgy_32 ._showDate_1lvgy_38 {\n  padding: 2px 6px;\n}\n._closeTag_1lvgy_42 {\n  color: var(--smed-base-09);\n  border-left: 1px solid var(--smed-base-09);\n}\n._showDate_1lvgy_38 {\n  padding: 4px 8px;\n}\n._showDate_1lvgy_38:hover,\n._closeTag_1lvgy_42:hover {\n  color: var(--smed-base-06);\n}");(c.__cssModules={}).$style={wrapper:"_wrapper_1lvgy_1",datePicker:"_datePicker_1lvgy_5",calendarIcon:"_calendarIcon_1lvgy_11",active:"_active_1lvgy_15",dateTag:"_dateTag_1lvgy_19",small:"_small_1lvgy_32",showDate:"_showDate_1lvgy_38",closeTag:"_closeTag_1lvgy_42"},c.render=function(a,t,l,n,s,o){const r=e.resolveComponent("svg-icon"),i=e.resolveComponent("search-input"),d=e.resolveComponent("datepicker"),c=e.resolveDirective("click-outside");return e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(a.$style.wrapper),onKeydown:t[5]||(t[5]=e.withKeys(((...e)=>a.closeCalendar&&a.closeCalendar(...e)),["esc"]))},[e.createVNode(i,{modelValue:a.modelValue,size:a.size,placeholder:a.placeholder,"onUpdate:modelValue":t[3]||(t[3]=e=>a.$emit("update:modelValue",e)),onSearchClear:t[4]||(t[4]=e=>a.$emit("clear-search",e))},{right:e.withCtx((()=>[a.date?(e.openBlock(),e.createElementBlock("div",{key:1,class:e.normalizeClass([a.$style.dateTag,"sm"===a.size&&a.$style.small])},[e.createElementVNode("span",{class:e.normalizeClass(a.$style.showDate),onClick:t[1]||(t[1]=e.withModifiers((e=>a.isShowCalendar=!0),["prevent"]))},e.toDisplayString(a.formattedDate),3),e.createVNode(r,{name:"close",class:e.normalizeClass(a.$style.closeTag),size:a.iconSize,onClick:t[2]||(t[2]=e.withModifiers((e=>a.$emit("update:date",null)),["prevent"]))},null,8,["class","size"])],2)):(e.openBlock(),e.createBlock(r,{key:0,name:"calendar",class:e.normalizeClass([a.$style.calendarIcon,a.isShowCalendar&&a.$style.active]),size:a.iconSize,onClick:t[0]||(t[0]=e.withModifiers((e=>a.isShowCalendar=!a.isShowCalendar),["prevent"]))},null,8,["class","size"]))])),_:1},8,["modelValue","size","placeholder"]),a.isShowCalendar?(e.openBlock(),e.createBlock(d,{key:0,inline:"",range:"",modelValue:a.date,class:e.normalizeClass(a.$style.datePicker),"disabled-dates":a.disabledDates,"onUpdate:modelValue":a.selectDate},null,8,["modelValue","class","disabled-dates","onUpdate:modelValue"])):e.createCommentVNode("",!0)],34)),[[c,a.closeCalendar]])},module.exports=c;
