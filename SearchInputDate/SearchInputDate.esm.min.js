import{defineComponent as e,resolveComponent as a,resolveDirective as t,withDirectives as n,openBlock as l,createElementBlock as s,normalizeClass as r,withKeys as o,createVNode as d,withCtx as i,createBlock as c,withModifiers as p,createElementVNode as m,toDisplayString as _,createCommentVNode as v}from"vue";import g from"@smartmed/webpatient-vue-components/SearchInput";import h from"@smartmed/webpatient-vue-components/Datepicker";import{ClickOutsideDirective as u}from"@smartmed/webpatient-vue-components/directives";import y from"@smartmed/webpatient-vue-components/SvgIcon";const w=new Intl.DateTimeFormat("ru",{day:"numeric",month:"short"});var f=e({emits:["update:modelValue","update:date","clear-search"],directives:{"click-outside":u},name:"SearchInputDate",props:{disableNextDate:Boolean,modelValue:{type:String,required:!0},size:{type:String,default:"md",validator:e=>["lg","md","sm"].includes(e)},date:{type:[Date,String,Array,Object]},placeholder:String},data:()=>({isShowCalendar:!1}),computed:{formattedDate(){return Array.isArray(this.date)?this.date.map((e=>w.format(e))).join(" â€” "):this.date instanceof Date?w.format(this.date):""},disabledDates(){return this.disableNextDate?e=>new Date<e:()=>!1},iconSize(){return"sm"===this.size?"md":"lg"}},methods:{closeCalendar(){this.isShowCalendar=!1},selectDate(e){this.isShowCalendar=!1,this.$emit("update:date",e)}},components:{SearchInput:g,Datepicker:h,SvgIcon:y}});!function(e,a){void 0===a&&(a={});var t=a.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===t&&n.firstChild?n.insertBefore(l,n.firstChild):n.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}("._wrapper_1lvgy_1 {\n  position: relative;\n}\n._datePicker_1lvgy_5 {\n  position: absolute;\n  right: 0;\n  top: calc(100% + 16px);\n}\n._calendarIcon_1lvgy_11 {\n  color: var(--smed-base-05);\n  cursor: pointer;\n}\n._calendarIcon_1lvgy_11._active_1lvgy_15, ._calendarIcon_1lvgy_11:hover {\n  color: var(--smed-primary);\n}\n._dateTag_1lvgy_19 {\n  font-size: 14px;\n  font-weight: 400;\n  line-height: 20px;\n  letter-spacing: 0px;\n  background-color: var(--smed-primary);\n  border-radius: 4px;\n  color: var(--smed-base-09);\n  display: flex;\n  align-items: center;\n  overflow: hidden;\n  cursor: pointer;\n}\n._dateTag_1lvgy_19._small_1lvgy_32 {\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 16px;\n  letter-spacing: 0px;\n}\n._dateTag_1lvgy_19._small_1lvgy_32 ._showDate_1lvgy_38 {\n  padding: 2px 6px;\n}\n._closeTag_1lvgy_42 {\n  color: var(--smed-base-09);\n  border-left: 1px solid var(--smed-base-09);\n}\n._showDate_1lvgy_38 {\n  padding: 4px 8px;\n}\n._showDate_1lvgy_38:hover,\n._closeTag_1lvgy_42:hover {\n  color: var(--smed-base-06);\n}");(f.__cssModules={}).$style={wrapper:"_wrapper_1lvgy_1",datePicker:"_datePicker_1lvgy_5",calendarIcon:"_calendarIcon_1lvgy_11",active:"_active_1lvgy_15",dateTag:"_dateTag_1lvgy_19",small:"_small_1lvgy_32",showDate:"_showDate_1lvgy_38",closeTag:"_closeTag_1lvgy_42"},f.render=function(e,g,h,u,y,w){const f=a("svg-icon"),S=a("search-input"),D=a("datepicker"),b=t("click-outside");return n((l(),s("div",{class:r(e.$style.wrapper),onKeydown:g[5]||(g[5]=o(((...a)=>e.closeCalendar&&e.closeCalendar(...a)),["esc"]))},[d(S,{modelValue:e.modelValue,size:e.size,placeholder:e.placeholder,"onUpdate:modelValue":g[3]||(g[3]=a=>e.$emit("update:modelValue",a)),onSearchClear:g[4]||(g[4]=a=>e.$emit("clear-search",a))},{right:i((()=>[e.date?(l(),s("div",{key:1,class:r([e.$style.dateTag,"sm"===e.size&&e.$style.small])},[m("span",{class:r(e.$style.showDate),onClick:g[1]||(g[1]=p((a=>e.isShowCalendar=!0),["prevent"]))},_(e.formattedDate),3),d(f,{name:"close",class:r(e.$style.closeTag),size:e.iconSize,onClick:g[2]||(g[2]=p((a=>e.$emit("update:date",null)),["prevent"]))},null,8,["class","size"])],2)):(l(),c(f,{key:0,name:"calendar",class:r([e.$style.calendarIcon,e.isShowCalendar&&e.$style.active]),size:e.iconSize,onClick:g[0]||(g[0]=p((a=>e.isShowCalendar=!e.isShowCalendar),["prevent"]))},null,8,["class","size"]))])),_:1},8,["modelValue","size","placeholder"]),e.isShowCalendar?(l(),c(D,{key:0,inline:"",range:"",modelValue:e.date,class:r(e.$style.datePicker),"disabled-dates":e.disabledDates,"onUpdate:modelValue":e.selectDate},null,8,["modelValue","class","disabled-dates","onUpdate:modelValue"])):v("",!0)],34)),[[b,e.closeCalendar]])};export{f as default};
