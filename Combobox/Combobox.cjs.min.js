"use strict";var e=require("vue"),t=require("@smartmed/webpatient-vue-components/BaseInput"),n=require("@smartmed/webpatient-vue-components/DropdownHost"),o=require("@smartmed/webpatient-vue-components/SvgIcon"),l=require("@smartmed/webpatient-vue-components/tokens");function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var a=r(t),i=r(n),s=r(o),u=e.defineComponent({inheritAttrs:!1,components:{BaseInput:a.default,DropdownHost:i.default,SvgIcon:s.default},name:"Combobox",props:{modelValue:{type:[String,Number,Object,null],required:!0},items:{type:[Array,null],default:()=>[]},stringify:{type:Function,default:e=>e},disabled:Boolean,matcher:Function,itemsFilter:Function,minHeight:Number,maxHeight:Number,maxWidth:Number,align:String,direction:String},setup(t,{emit:n}){const{modelValue:o,items:r}=e.toRefs(t),a=e.ref(!1),i=e.ref(null),s=e.inject(l.CONTROL_ACCESSOR_TOKEN,null);s&&e.provide(l.CONTROL_ACCESSOR_TOKEN,null);const u=(e,n)=>t.stringify(e)===t.stringify(n),d=e.computed((()=>{if(!r.value)return null;const e=t.matcher||u;return r.value.find((t=>e(o.value,t)))})),c=e.computed((()=>{if(null===r.value)return null;if(d.value)return r.value;const e=t.itemsFilter||u;return r.value.filter((t=>e(o.value,t)))})),m=e.computed((()=>null!==o.value&&String(o.value).length>0));e.watch(a,(e=>{!e&&s&&s.markAsTouch()})),e.watch(o,(()=>{a.value||!m.value||d.value||p()})),e.watch(d,(e=>{e&&(v(),i.value&&i.value.focus())}));const p=()=>{a.value=!0},v=()=>{a.value=!1};return{hide:v,opened:a,filteredItems:c,baseInput:i,onKeyupEnter:e=>{a.value&&e.preventDefault();const t=c.value;t&&1===t.length&&n("update:modelValue",t[0])}}}});!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],l=document.createElement("style");l.type="text/css","top"===n&&o.firstChild?o.insertBefore(l,o.firstChild):o.appendChild(l),l.styleSheet?l.styleSheet.cssText=e:l.appendChild(document.createTextNode(e))}}("._host_1cv49_1 {\n  width: 100%;\n}\n._icon_1cv49_5 {\n  transition: transform 0.2s linear;\n  color: var(--smed-base-05);\n  cursor: pointer;\n}\n._icon_rotated_1cv49_10 {\n  transform: rotate(180deg);\n}");(u.__cssModules={}).$style={host:"_host_1cv49_1",icon:"_icon_1cv49_5",icon_rotated:"_icon_rotated_1cv49_10"},u.render=function(t,n,o,l,r,a){const i=e.resolveComponent("svg-icon"),s=e.resolveComponent("base-input"),u=e.resolveComponent("dropdown-host");return e.openBlock(),e.createBlock(u,{modelValue:t.opened,"onUpdate:modelValue":n[2]||(n[2]=e=>t.opened=e),class:e.normalizeClass(t.$style.host),align:t.align,"can-open":!t.disabled,direction:t.direction,"max-height":t.maxHeight,"max-width":t.maxWidth,"min-height":t.minHeight,onKeyup:e.withKeys(t.onKeyupEnter,["enter"])},{dropdown:e.withCtx((()=>[e.renderSlot(t.$slots,"dropdown",{items:t.filteredItems})])),default:e.withCtx((()=>[e.createVNode(s,e.mergeProps(t.$attrs,{"has-cleaner":"",ref:"baseInput",disabled:t.disabled,"model-value":t.modelValue,stringify:t.stringify,onSearchClear:n[1]||(n[1]=e=>t.$emit("update:modelValue",null))}),e.createSlots({right:e.withCtx((()=>[e.createVNode(i,{name:"arrow-down",class:e.normalizeClass([t.$style.icon,t.opened&&t.$style.icon_rotated]),onClick:n[0]||(n[0]=e.withModifiers((()=>{}),["stop"]))},null,8,["class"])])),valueContent:e.withCtx((()=>[t.$slots.valueContent?e.renderSlot(t.$slots,"valueContent",{key:0,value:t.modelValue}):e.createCommentVNode("",!0)])),_:2},[t.$slots.left?{name:"left",fn:e.withCtx((()=>[e.renderSlot(t.$slots,"left")]))}:void 0]),1040,["disabled","model-value","stringify"])])),_:3},8,["modelValue","class","align","can-open","direction","max-height","max-width","min-height","onKeyup"])},module.exports=u;
