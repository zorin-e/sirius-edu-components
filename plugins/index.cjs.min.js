"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");function t(e){return e.target}function n(e){return"getRootNode"in e&&e.isConnected?e.getRootNode():e.ownerDocument}function o(e){return n(e).activeElement!==e&&!e.disabled}const u={install(u){const r=e.ref(null),i=e=>{o(t(e))&&(r.value=e.relatedTarget)};window.addEventListener("mousedown",(e=>{if(window.removeEventListener("focusout",i),document.activeElement&&document.activeElement!==document.body){let n=null;const o=()=>{r.value=t(e),window.removeEventListener("focusout",o),n&&clearTimeout(n)};window.addEventListener("focusout",o),n=setTimeout((()=>{n=null,window.removeEventListener("focusout",o)}))}else r.value=t(e)})),window.addEventListener("mouseup",(()=>{window.addEventListener("focusout",i)}));let d=null;const s=e=>{r.value=e.target},a=e=>{e.relatedTarget&&!o(e.target)&&(r.value=e.relatedTarget)};window.addEventListener("focusin",(e=>{const o=t(e),u=n(o);if(d&&(d.removeEventListener("focusin",s),d.removeEventListener("focusout",a)),u!==document)d=u,d.addEventListener("focusin",s),d.addEventListener("focusout",a);else{if("-1"===o.getAttribute("tabIndex"))return;r.value=o}})),window.addEventListener("focusout",i),window.addEventListener("blur",(()=>{const e=document.activeElement;e&&e.matches("iframe")&&(r.value=e)})),u.provide("__SmartMed_ACTIVE_ELEMENT_TOKEN",e.readonly(r))}},r={install(t){const n=e.ref(null);document.addEventListener("selectionchange",(e=>{n.value=e})),t.provide("__SmartMed_SELECTION_CHANGE_TOKEN",e.readonly(n))}};exports.ActiveElementPlugin=u,exports.SelectionChangePlugin=r;
